version: '3'

networks:
  micro_red:
    driver: bridge
    name: micro_red


services:
  config-server:
    build: 
      context: ./ms-config-server
      dockerfile: Dockerfile
    ports:
      - 7070:7070
    networks:
      - micro_red
    cpu_limit: 0.5
    mem_limit: 1g

  
  registry-server:
    build: ms-registry-server
    ports:
      - 8090:8090
    depends_on:
      - config-server
    networks:
      - micro_red
    cpu_limit: 0.5
    mem_limit: 1g

  gateway-server:
    build: ms-gateway-server
    ports:
      - 8080:8080
    depends_on:
      - config-server
    networks:
      - micro_red
    cpu_limit: 0.5
    mem_limit: 1g
  
  admin-server:
    build: ms-admin-server
    ports:
      - 6060:6060
    depends_on:
      - config-server
    networks:
      - micro_red
    cpu_limit: 0.5
    mem_limit: 1g